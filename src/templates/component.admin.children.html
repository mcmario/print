<div class="info_container cities_widget branch-widget">
    <div class="spinner_container" ng-if="ctrl.spinner==true">
        <div class="spinner spinner_components">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>

    <div class="col-xs-12 info_header no-padding">
        <div class="info_person col-xs-12">

            <span class="info_header_title">Адміністрування: статистика по дітях</span>
            <!--<button ng-click="ctrl.createJsonTable()" ng-if="ctrl.showStatByYears">gogogo</button>-->
        </div>

    </div>


    <div class="col-xs-12 statistic_header_departments"
         ng-init="ctrl.cityTitle='';ctrl.depTitle='';ctrl.childrenInit()"
    >
        <div class="dropdown  col-xs-3 col-lg-4"
             style="position: relative;height: 50px; "
             ng-init="ctrl.depTitleShow='Оберіть департамент'
"
        >
            <button class=" polls_statistics_filters dropdown-toggle rounded-buttons-header" type="button"
                    data-toggle="dropdown"
                    style=" width: 100%;height: 50px; border-radius: 0"
                    ng-click="depSearch='';ctrl.getDepartments()">
                <span ng-bind="ctrl.depTitleShow"> </span>

            </button>

            <ul class="dropdown-menu col-xs-12 customScroll"
                style="min-width:350px; max-height: 300px;overflow: auto; margin-right: 10px; position: absolute;"
                ng-init="ctrl.depTitleShow='Оберіть департамент'">
                <li class="dropdown-menu_search-input" style="position: sticky; top: 0;">
                    <input type="text"
                           style="width: 100%; padding-left:35px"
                           autofocus placeholder="Введіть назву департаменту"
                           ng-model="depSearch"></li>
                <li class="polls_statistics_filters_li"

                    ng-click="ctrl.childrenDep='%'; ctrl.depTitleShow='Усі департаменти';ctrl.getChildrenInfo()"


                >
                    <span class="invisible"></span>
                    <span>Усі відділи</span>
                </li>


                <li class="polls_statistics_filters_li"

                    ng-click="ctrl.childrenDep=dep; ctrl.depTitleShow=dep;ctrl.getChildrenInfo()"
                    ng-repeat="dep in departments track by $index| filter: depSearch"

                >
                    <span class="invisible"></span>
                    <span>{{dep}}</span>
                </li>

            </ul>
        </div>


        <div class="dropdown  col-xs-2 col-lg-3 "
             style="position: relative;height: 50px; ">
            <button class=" polls_statistics_filters dropdown-toggle rounded-buttons-header" type="button"
                    data-toggle="dropdown"
                    ng-init="ctrl.cityTitleShow='Оберіть місто'"
                    style="width: 100%;height: 50px; border-radius: 0"
                    ng-click="ctrl.getCities()">
                <span ng-bind="ctrl.cityTitleShow"> </span>

            </button>

            <ul class="dropdown-menu col-xs-12 customScroll"
                style="min-width:350px; max-height: 300px;overflow: auto; margin-right: 10px; position: absolute;">

                <li class="polls_statistics_filters_li"

                    ng-click="ctrl.cityTitleShow='Усі міста';ctrl.childrenCity='%'; ctrl.getChildrenInfo()"


                >
                    <span class="invisible"></span>
                    <span>Усі міста</span>
                </li>


                <li class="polls_statistics_filters_li"

                    ng-click="ctrl.childrenCity=city.name; ctrl.cityTitleShow=city.name;ctrl.getChildrenInfo() "
                    ng-repeat="city in citieslist | filter: citySearch"

                >
                    <span class="invisible"></span>
                    <span>{{city.name}}</span>
                </li>

            </ul>
        </div>


        <input type="date" class="dateInput  col-xs-1 col-lg-2" ng-model="ctrl.childrenDate"
               ng-s="ctrl.getChildrenInfo()">
        <!--<div class="dropdown  col-xs-1 col-lg-2 "-->
        <!--style="position: relative;height: 50px;">-->
        <!--<button class=" polls_statistics_filters dropdown-toggle rounded-buttons-header" type="button"-->
        <!--data-toggle="dropdown"-->
        <!--style="width: 100%;height: 50px; border-radius: 0"-->

        <!--ng-init="ctrl.searchYear='Оберіть рік'">-->
        <!--<span ng-bind="ctrl.searchYear"> </span>-->

        <!--</button>-->

        <!--<ul class="dropdown-menu col-xs-12 customScroll"-->
        <!--style=" max-height: 300px;overflow: auto; margin-right: 10px; position: absolute;">-->

        <!--<li class="polls_statistics_filters_li"-->
        <!--ng-click="ctrl.searchYear='Усі роки';"-->


        <!--&gt;-->
        <!--<span class="invisible"></span>-->
        <!--<span>Усі роки</span>-->
        <!--</li>-->


        <!--<li class="polls_statistics_filters_li"-->

        <!--ng-click="ctrl.searchYear=year+'';ctrl.createJsonTable(year)"-->
        <!--ng-repeat="year in ctrl.restYears"-->

        <!--&gt;-->
        <!--<span class="invisible"></span>-->
        <!--<span>{{year}}</span>-->
        <!--</li>-->

        <!--</ul>-->
        <!--</div>-->
        <!--<div class="col-xs-1" style="align-items: center" title='сформувати звіт'>-->
        <button class="col-xs-1 polls_statistics_filters_clear" ng-click=" ctrl.getChildrenInfo()"
                title='сформувати звіт'>

            <svg style="height: 30px; margin-left: 15px;"
                 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24.559">
                <defs>
                    <style>
                        .cls-1admin {
                            fill: #457bbf;

                        }
                    </style>
                </defs>
                <path id="Path_550" data-name="Path 550" class="cls-1admin"
                      d="M13.509,3a9.509,9.509,0,1,0,5.559,17.218l7.359,7.342L28,25.986,20.728,18.7A9.508,9.508,0,0,0,13.509,3Zm0,1.119a8.39,8.39,0,1,1-8.39,8.39A8.381,8.381,0,0,1,13.509,4.119Z"
                      transform="translate(-4 -3)"/>
            </svg>


        </button>
        <!--</span>-->
        <!--</div>-->

        <!--<form method=post enctype=multipart/form-data name="add_" action="/api/create_xls">-->
        <!--<input style="display: none;" type="text" name="id" value="{{ctrl.report}}">-->
        <!--<input type=submit value="Редагувати">-->
        <!--</form>-->

        <button ng-click="ctrl.childrenInit();ctrl.cityTitleShow='Оберіть місто';ctrl.depTitleShow='Оберіть департамент'; ctrl.children=false"

                class="col-xs-1 polls_statistics_filters_clear" title="очистити фільтри">
            <svg style='height: 30px;' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25.002 23.338">
                <defs>
                    <style>.acf {
                     fill: #457bbf;
                    }</style>
                </defs>
                <g transform="translate(-2.998 -4)">
                    <path class="acf"
                          d="M19.439,4a1.646,1.646,0,0,0-1.18.486L3.486,19.415a1.718,1.718,0,0,0,0,2.4L8.8,27.175a.568.568,0,0,0,.4.156H24.109a.561.561,0,1,0,0-1.111H15.238L27.512,13.826a1.715,1.715,0,0,0,0-2.4L20.637,4.486A1.685,1.685,0,0,0,19.439,4Zm0,1.111a.572.572,0,0,1,.4.174l6.874,6.944a.54.54,0,0,1,.139.521.547.547,0,0,0-.521-.417.556.556,0,0,0-.017,1.111L25.22,14.537a.556.556,0,1,0-.573.573l-1.094,1.111a.556.556,0,1,0-.556.556l-1.111,1.111a.556.556,0,1,0-.556.556h.035L20.2,19.606c0-.02.017-.033.017-.052A.557.557,0,0,0,19.665,19a.531.531,0,0,0-.278.087L18.45,18.2a.54.54,0,0,0,.1-.312.553.553,0,0,0-.92-.417l-.9-.851a.565.565,0,0,0,.156-.4.557.557,0,0,0-.556-.556.549.549,0,0,0-.417.191L15,14.989a.543.543,0,0,0,.226-.434A.557.557,0,0,0,14.665,14a.538.538,0,0,0-.451.26l-.972-.885a.548.548,0,0,0,.312-.486A.549.549,0,0,0,12.5,12.68l-.312-.3a.528.528,0,0,0-.087-.069l6.961-7.031A.534.534,0,0,1,19.439,5.111Zm.226.556a.556.556,0,1,0,.556.556A.557.557,0,0,0,19.665,5.667ZM18,7.333a.556.556,0,1,0,.556.556A.557.557,0,0,0,18,7.333Zm3.333,0a.556.556,0,1,0,.556.556A.557.557,0,0,0,21.331,7.333ZM16.332,9a.556.556,0,1,0,.556.556A.557.557,0,0,0,16.332,9Zm3.333,0a.556.556,0,1,0,.556.556A.557.557,0,0,0,19.665,9ZM23,9a.556.556,0,1,0,.556.556A.557.557,0,0,0,23,9Zm-8.333,1.667a.556.556,0,1,0,.556.556A.557.557,0,0,0,14.665,10.666Zm3.333,0a.556.556,0,1,0,.556.556A.557.557,0,0,0,18,10.666Zm3.333,0a.556.556,0,1,0,.556.556A.557.557,0,0,0,21.331,10.666Zm3.333,0a.556.556,0,1,0,.556.556A.557.557,0,0,0,24.665,10.666Zm-8.333,1.667a.556.556,0,1,0,.556.556A.557.557,0,0,0,16.332,12.333Zm3.333,0a.556.556,0,1,0,.556.556A.557.557,0,0,0,19.665,12.333Zm3.333,0a.556.556,0,1,0,.556.556A.557.557,0,0,0,23,12.333Zm-11.683.781a.589.589,0,0,0,.1.1L19.3,20.527l-5.642,5.694H9.44L4.284,21.013a.561.561,0,0,1,0-.8ZM18,14a.556.556,0,1,0,.556.556A.557.557,0,0,0,18,14Zm3.333,0a.556.556,0,1,0,.556.556A.557.557,0,0,0,21.331,14Zm-1.667,1.667a.556.556,0,1,0,.556.556A.557.557,0,0,0,19.665,15.666Z"/>
                </g>
            </svg>
        </button>
        <form class="col-xs-1" method=post enctype=multipart/form-data name="add_" action="/api/create_xls">
            <input type="text" style="display: none;" name="id" value="{{ctrl.report}}">
            <label class="col-xs-12 no-padding" for="submitInputWorkers"
                   style="margin: 0;display: flex;align-items: flex-end;cursor: pointer;"
                   ng-disabled="!ctrl.printStat"
            >
                <input type="submit"
                       style="display: none"
                       id="submitInputWorkers"


                >

                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 23" style="height: 28px">
                    <defs>
                        <style>
                            .cls-1print {
                                fill: #457bbf;
                            }
                        </style>
                    </defs>
                    <path id="Path_547" data-name="Path 547" class="cls-1print"
                          d="M7,4A1,1,0,0,0,6,5V7H24V5a1,1,0,0,0-1-1ZM4,9a2,2,0,0,0-2,2v9a2,2,0,0,0,2,2H6v5H24V22h2a2,2,0,0,0,2-2V11a2,2,0,0,0-2-2Zm4,6H22V25H8Z"
                          transform="translate(-2 -4)"/>
                </svg>
            </label>


        </form>


    </div>
    <div class="col-xs-12 statistic_body no-padding" ng-if="ctrl.children">
        <div class="col-xs-12 statistic_body_header " >
            <div class="col-xs-4 text-left">Прізвище, ім'я</div>
            <div class="col-xs-4 text-left">Посада</div>
            <div class="col-xs-4 text-left">Діти</div>

        </div>
        <div class="col-xs-12 statistic_body_period_head"
             style="margin-bottom: 5px;"
        >
            <span class="col-xs-4 statistic_body_period_head-period  text-left"
                  ng-bind="ctrl.children&&ctrl.childrenDep=='%'?'Всього':ctrl.children&&ctrl.childrenDep!='%'?'Всього по департаменту':'Всього'">
            <span ng-if="ctrl.childrenCity!='%'"> у місті {{ ctrl.childrenCity}}</span>

            </span>
            <span class="col-xs-4 text-center">
                <div class="col-xs-12 text-blue">

                    <div class="col-xs-6"
                        ng-click="showAll=!showAll;"
                    >
                        <span ng-bind="showAll?'Згорнути':' Розгорнути'"
                        ng-click=""></span>
                        <span class="caret" ng-class="{'caret-rotate ':showAll}"></span> <span></span>
                    </div>




                </div>
            </span>
            <span class="col-xs-4 text-left"><span class="col-xs-12">{{ctrl.getCount('all')}}</span></span>


        </div>
        <div class="col-xs-12 statistic_body_period no-padding" ng-repeat="(key,value) in ctrl.children track by $index"

        >

            <div class="col-xs-12 statistic_body_period_head"
                 style="margin-bottom: 5px;"
                 ng-click="showAll=!showAll;"
            >
                <span class="col-xs-4 statistic_body_period_head-period  text-left">{{key}}</span>
                <span class="col-xs-4 text-center"></span>
                <span class="col-xs-4 text-left"><span class="col-xs-12">{{ctrl.getCount(key)}}</span></span>


            </div>


            <div class="col-xs-12 statistic_body_period_quarter no-padding animate-if" ng-init="showMonth"
                 ng-if="showQuarter||showAll"
                 ng-repeat="worker in value">

                <div class="col-xs-12 statistic_body_period_quarter-body animate-if no-padding"
                     ng-if="showMonth||showAll">
                    <div class="col-xs-12 statistic_body_period_month statistic_body_period_month_children div_bordered_many no-padding"
ng-class="{'div_bordered_many':worker.children.length>=2}"
                    >

                        <div class="col-xs-4 div_bordered ">
                            <span class="text-left" style="    padding-left: 15px;">{{worker.surname_ua}} {{worker.name_ua}}</span>
                        </div>
                        <div class="col-xs-4 div_bordered ">
                            <span class="text-left" style="    padding-left: 15px;">{{worker.position.name}}</span>
                        </div>
                        <div class="col-xs-1 div_bordered ">
                            <span class="text-left" style="    padding-left: 15px;">{{worker.count}}</span>
                        </div>
                        <div class="col-xs-3 div_bordered  "
                        ng-class="{'div_bordered_listChildren':worker.children.length>1}"
                        >
                            <span class="col-xs-12 text-left" style="    padding-left: 15px;" ng-repeat="kid in worker.children">{{kid.name}}/{{kid.birthday}}</span>
                        </div>

                        <!--<div class="col-xs-4 div_bordered ">-->
                        <!--<span class="text-center"-->
                        <!--ng-bind="value[x*3+(z-1)].in>0?value[x*3+(z-1)].in:'-'"></span>-->
                        <!--</div>-->
                        <!--<div class="col-xs-2 div_bordered  ">-->
                        <!--<span class="text-center"-->
                        <!--ng-bind="value[x*3+(z-1)].out>0?value[x*3+(z-1)].out:'-'"></span>-->
                        <!--</div>-->
                        <!--<div class="col-xs-2 div_bordered  ">-->
                        <!--<span class="text-center"-->
                        <!--ng-bind="value[x*3+(z-1)][x*3+(z)]>0?value[x*3+(z-1)][x*3+(z)]:'-'"></span>-->
                        <!--</div>-->
                        <!--<div class="col-xs-0 div_bordered"><span></span></div>-->


                    </div>
                </div>

            </div>


        </div>
    </div>
    <div class="col-xs-12 invisible"><br><br><br><br></div>


    <br>
    <br>
</div>

